@{
    ViewBag.Title = "PanelVisitantes";
    Layout = "~/Views/Shared/_Layout-Visita.cshtml";
}

@{

    string fechaActual = System.DateTime.Now.ToString("yyyy-MM-dd") + "";
    //string fecha = "01/" + System.DateTime.Now.ToString("MM") + System.DateTime.Now.ToString("yyyy");
    String espacio = " ";
                            //String primerDiaMesPasado = System.DateTime.Now.Year + "-" + System.DateTime.Now.AddMonths(-5).ToString("MM") + "-" + "01"; ;
                            //String linkInicio = "http://imudesati.somee.com/";

}



<!DOCTYPE html>

<div ng-app="app">

    @*<title>Registro de Todas las visitas</title>*@

    <div ng-controller="myController">



        <div class="container formEstilo">
            @* col-lg-n:toma el tamaño de n columnas// offset-lg-n:desplaza n columnas en la pantalla*@
            <form method="post">
                <div class="header">
                    <h3 style="text-align: center; font-family: sans-serif; color: white; font-weight: bold;">BÚSQUEDA DE VISITANTES POR FILTROS</h3>
                    <hr />
                </div>

                <div>

                    @*<--********INICIO*************-->
                *@
                    <div class="table-responsive-xl ">
                        <div class="form-group row">
                            <div class="col-md-6">
                                <label class=" labelEstilo" for="fechai"><i class="fa fa-check-square" aria-hidden="true"></i>&nbsp;Desde:</label>
                                <div class="form-inline">
                                    <input type="text" class="form-control inputStyleCal form_datetimefiltro readonlyfec" id="fechadesde" placeholder="ingrese fecha" />
                                    <span style="color: white"><i class="fa fa-calendar"></i></span>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label class="labelEstilo" for="fechaf"><i class="fa fa-check-square" aria-hidden="true"></i>&nbsp;Hasta:</label>
                                <div class="form-inline">
                                    <input type="text" class="form-control inputStyleCal form_datetimefiltro readonlyfec" id="fechahasta" placeholder="Ingrese fecha" />
                                    <span style="color: white"><i class="fa fa-calendar"></i></span>
                                </div>
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-md-6">
                                <label class="labelEstilo" for="dni"><i class="fa fa-check-square" aria-hidden="true"></i>&nbsp;Dni:</label>
                                <input type="text" class="form-control oscuro" maxlength="10" ng-model="entidad.dni" id="dni" placeholder="Ingrese el dni" />
                            </div>
                            <div class="col-md-6">
                                <label class=" labelEstilo" for="nombre"><i class="fa fa-check-square" aria-hidden="true"></i>&nbsp;Visitante:</label>
                                <input type="text" class="form-control oscuro" ng-model="entidad.nombre" id="nombre" placeholder="Ingrese el visitante" />
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-md-6">
                                <label class=" labelEstilo" for="destino"><i class="fa fa-check-square" aria-hidden="true"></i>&nbsp;Destino:</label>
                                <input type="text" class="form-control oscuro" ng-model="entidad.destino" id="destino" placeholder="Ingrese el destino" />
                            </div>

                            <div class="col-md-6">
                                <label class=" labelEstilo" for="encargado"><i class="fa fa-check-square" aria-hidden="true"></i>&nbsp;Encargado:</label>
                                <input type="text" class="form-control oscuro" ng-model="entidad.encargado" id="encargado" placeholder="Ingrese el encargado" />
                            </div>
                        </div>

                        <div class="form-group row">
                            <div class="col-md-6">
                                <label class="labelEstilo" for="proveedor"><i class="fa fa-check-square" aria-hidden="true"></i>&nbsp;Proviene de:</label>
                                <input type="text" class="form-control oscuro" ng-model="entidad.proveedor" id="proveedor" placeholder="Ingrese la empresa proveniente" />
                            </div>
                        </div>

                    </div>
                    @*<--********FIN CUADRO *************-->
               
                   *@
                </div>

                <br />
                <div class="form-inline contenidoCentrado">
                    <button   class="btn btn-primary" style="width: 200px; height: 40px; font-weight: bold;" id="filtrar" ng-click="filtrarxCampos()"><i class="fa fa-search" aria-hidden="true"></i>&nbsp;BUSCAR</button>
                </div>
                <br />
            </form>

        </div>


        <br />
        @*<--***********************CUADRO DE FILTROS******************************-->*@
        @*<div class=" btn-primary container table-responsive-xl" style="width:1000px">
        <br />
        <div>
            <center>
                <label style="width:100px;font-size:18px;"><strong>Filtros:</strong></label>
                <input style="background: red;width: 100px;text-align:center;font-weight:bold" type="text" value="@fechaActual" id='fecha1' ng-readonly="true" />
                |
                <input type="text" style="background: red;width: 100px;text-align:center;font-weight:bold" value="@fechaActual" id='fecha2' ng-readonly="true" />
                |
                <input type="text" style="background: red;width: 150px;text-align:center;font-weight:bold" value="" id='nombre2' ng-readonly="true" />
                |
                <input type="text" style="background: red;width: 100px;text-align:center;font-weight:bold" value="" id='dni2' ng-readonly="true" />
                |
                <input type="text" style="background: red;width: 150px;text-align:center;font-weight:bold" value="" id='destino2' ng-readonly="true" />
                |
                <input type="text" style="background: red;width: 150px;text-align:center;font-weight:bold" value="" id='proveedor2' ng-readonly="true" />
            </center>
        </div>
        <div>
            <center>
                <label style="width:90px"></label>
                <label style="width:110px">Desde</label>
                <label style="width:100px">Hasta</label>
                <label style="width:150px">Nombre</label>
                <label style="width:120px">Dni</label>
                <label style="width:170px">Destino</label>
                <label style="width:150px">Proveedor</label>
            </center>
        </div>
    </div>*@
        @*<--***********************FIN CUADRO ************************-->*@

        <div class="container">
            <hr style="color: red; border-width: 4px" />
        </div>

        @*<--***********************TABLA DE DATOS ************************-->*@
        <div>
            <div style="text-align: center">
                <h2 style="font-weight: bold;">RESULTADO DE BÚSQUEDA</h2>
            </div>


            <div class="container">
                <div >
                    <div class="form-inline letra" style=" float: left;">
                        <label>Total de registros:</label>
                        <input value="{{numvisitas}}" readonly="true" style="width: 50px; height: 25px; text-align: center; font-weight: bold; color: blue; font-size: 18px" />
                    </div>
                    <div class="form-inline letra">
                        <button id="buttonExport" ng-click="reporteFiltros()" class="btn btn-primary" style="float: right; margin-right: 0px"><i style="font-size: 20px; color: green; font-weight: bold" class="fa fa-file-excel-o"></i>@espacio Descargar</button>
                    </div>

                </div>



                <table class="table table-bordered table-responsive-xl" id="tablaDatos">
                    <thead style="color: white; background-color: red">
                        <tr>
                            <th style="text-align: center">Fecha</th>
                            <th style="text-align: center">Hora de Entrada</th>
                            <th style="text-align: center">Hora de Salida</th>
                            <th style="text-align: center">Nombre</th>
                            <th style="text-align: center">Dni</th>
                            <th style="text-align: center">Destino</th>
                            <th style="text-align: center">Encargado</th>
                            <th style="text-align: center">Proveedor</th>


                        </tr>
                    </thead>
                    <tbody style="text-align: center" id="TablaBody">

                        <tr ng-repeat="v in visitasfiltradas">

                            <td style="font-weight: bold">{{v.fecha}}
                            </td>
                            <td style="color: green; font-weight: bold; font-size: 18px">{{v.horaentrada}}
                            </td>
                            <td style="color: red; font-weight: bold; font-size: 18px">{{v.horasalida}}
                            </td>
                            <td style="color: blue; font-weight: bold">{{v.persona}}
                            </td>
                            <td style="color: blue; font-weight: bold">{{v.dni}}
                            </td>

                            <td style="color: blue; font-weight: bold">{{v.destino}}
                            </td>
                            <td style="font-weight: bold">{{v.encargado}}
                            </td>

                            <td style="font-weight: bold">{{v.empresa_proveniente}}
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        @*<--***********************FIN DE TABLA  ************************-->*@


        @*------jQuery library ------*@
        <script src="~/Scripts/jquery-3.3.1.min.js"></script>
        <script src="~/Scripts/bootstrap.min.js"></script>
        <script src="~/Scripts/angular.min.js"></script>
        <script src="~/Scripts/moment.min.js"></script>
        <script src="~/Scripts/bootstrap-datetimepicker.min.js"></script>
        <script src="~/Scripts/bootstrap-datetimepicker.es.js"></script>
        @*------Controlador----------*@
        <script src="~/Scripts/AngularController/visitanteAngular.js"></script>
        @*------Extras ------*@
        <script src="~/Scripts/utilGeneral.js"></script>

    </div>




</div>

